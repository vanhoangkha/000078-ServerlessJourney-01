[
{
	"uri": "/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Tổng quan Để bắt đầu, cùng tìm hiểu về Serverless là gì, AWS Lambda là gì. Serverless là một trong những mô hình phát triển ứng dụng trên cloud. Cloud cung cấp cho người dùng 4 mô hình phát triển như sau:\n IaaS (Infrastructure as a Service) PaaS (Platform as a Service) CaaS (Container as a Service) FaaS (Function as a Service)   Infrastructure as a Service\nĐây là mô hình phổ biến nhất khi sử dụng cloud, các bạn có thể đã sử dụng nó hàng ngày mà không để ý. Ở mô hình này nhà phát triển Cloud sẽ exposes những API mà tương tác với virtualized platform bên dưới, như là API tương tác với máy ảo, API tương tác với storage, \u0026hellip; để có thể tự tạo và quản lý hạ tầng của mình trên cloud. Ví dụ như là AWS Cloud exposes những API liên quan tới EC2, cho phép chúng ta tự tạo và quản lý EC2 của mình một cách dễ dàng bằng Web Console hoặc AWS CLI. Ở mô hình này thì chúng ta sẽ tự tạo, và tự quản lý hạ tầng cũng như việc mở rộng.\nPlatform as a Service\nĐây là một mô hình phát triển mà cloud sẽ cung cấp cho bạn một Platform Framework để phát triển ứng dụng nhanh hơn. Ví dụ để triển khai một ứng dụng web trên cloud, đầu tiên cần phải tạo EC2 (máy ảo), xong rồi cấu hình security group để traffic có thể đi vào EC2, xong sau đó deploy ứng dụng trên EC2, và nhiều thiết lập khác nữa. Do đó các nhà phát triển cloud cung cấp các Platform để làm việc đó nhanh hơn. Ví dụ như AWS thì có AWS Elastic Beanstalk, là một Platform cho phép người dùng dễ dàng triển khai một ứng dụng web, mà chỉ cần dùng vài cái click chuột đơn giản trên Web Console là sẽ có được một ứng dụng web, thay vì phải đi tạo và cấu hình nhiều thứ khác.\nSoftware as a Service\nMô hình này thì đơn giản là phát triển ứng dụng dựa trên container và có một tool để quản lý những container của chúng ta, ví dụ như là Kubernetes. AWS có cung cấp AWS EKS để phát triển ứng dụng trên mô hình CaaS.\nFunction as a Service\nCuối cùng và là cấp nhỏ nhất, cloud cho phép người dùng phát triển ứng dụng chỉ dựa trên các Function, mà không cần phải tạo và quản lý hạ tầng phúc tạp, chỉ cần quản lý những function. Những function này có thể tự động mở rộng mà không cần phải cấu hình gì, đây chính là thành phần chính trong mô hình Serverless của chúng ta.\nVậy Serverless là mô hình phát triển ứng dụng và dịch vụ mà không phải quan tâm đến máy chủ. Một ứng dụng theo mô hình Serverless sẽ không cần quan tâm việc phân bổ, quản lý tài nguyên của hệ điều hành, và bỏ qua các vấn đề về nâng cấp và bảo mật.\nLợi ích của Serverless\n  Không cần quản lý máy chủ: Bạn sẽ không cần cung cấp hay duy trì bất kỳ máy chủ nào. Sẽ không cần phần mềm hoặc thời gian chạy để cài đặt, nâng cấp hoặc quản trị.\n  Thay đổi quy mô linh hoạt và độ sẵn sàng cao: FaaS của chúng ta sẽ tự động scale theo traffic, không cần cấu hình gì nhiều, trừ khi người dùng muốn nó mở rộng theo một cách cụ thế nào đó.\n  Tiết kiệm chi phí: Bạn sẽ chỉ cần trả tiền cho từng function được trigger, sử dụng bao nhiêu tính tiền bấy nhiêu.\n  Hỗ trợ nhiều ngôn ngữ khác nhau: có thể dùng nhiều ngôn ngữ khác nhau để viết FaaS Điểm yếu của Serverless\n  Khó debug.\n  Cold starts: mất một khoảng thời gian nếu function được trigger lần đầu tiên, hoặc function đó ít khi được request tới thì khi nó chạy lại khá tốn thời gian.\n  Khó tổ chức source code: vì mỗi function sẽ được deploy riêng nên cách tổ chức source code sẽ khó hay dễ tùy thuộc vào ngôn ngữ khác nhau.\n  Khó thiết kế môi trường dev local.\n  AWS Lambda AWS Lambda là một service của AWS cho phép chúng ta chạy và quản lý function. Đây là thành phần chính của mô hình Serverless. Ngoài AWS Lambda thì AWS còn cung cấp cho chúng ta một số dịch vụ như sau để xây dựng mô hình Serverless:\n S3 ta dùng để lưu hình ảnh API gateway để ta xây dựng REST API DynamoDB cho cơ sở dữ liệu Cognito dùng để xác thực người dùng SQS dùng cho hàng đợi SNS dùng cho thông báo  AWS Lambda được thiết kế cho event-driven architecture, code của chúng ta sẽ được trigger dựa theo một event nào đó, ví dụ là request của client tới API, tất cả các process trigger là độc lập vói nhau và chỉ trả tiền cho từng lần function được trigger và chạy. So sánh với EC2 thì ta phải trả tiền theo giờ, ngay cả khi code trên EC2 của chúng ta không xử lý request nào cho user cả thì ta vẫn tốn tiền trả, còn Lambda thì không như vậy.\n"
},
{
	"uri": "/vi/",
	"title": "Serverless - Lambda tương tác với S3 và DynamoDB",
	"tags": [],
	"description": "",
	"content": "Serverless - Lambda tương tác với S3 và DynamoDB Tổng quan Đây là series về Serverless với AWS Cloud. AWS cung cấp các công nghệ để chạy code, quản lý dữ liệu, và tích hợp các ứng dụng mà không cần quản lý máy chủ. Các công nghệ đó phục vụ cho người dùng tạo các ứng dụng theo mô hình Serverless. Các ứng dụng Serverless bắt đầu với AWS Lambda, lưu dữ liệu với DynamoDB, nhận yêu cầu của người dùng với API Gateway, host static web với S3/AWS Amplify Console,\u0026hellip;.\nVí dụ về ứng dụng web sử dụng mô hình Serverless với cloud: Trong bài đầu tiên của series này, chúng ta sẽ tìm hiểu các khái niệm cơ bản về Serverless và thực hành tạo các function với Lambda được trigger từ S3 và ghi dữ liệu vào bảng DynamoDB.\nNội dung  Giới thiệu Tạo Lambda thay đổi kích thước ảnh Tạo Lambda ghi dữ liệu vào DynamoDB  "
},
{
	"uri": "/vi/3-write-data-to-dynaomodb/3-1-create-dynamodb-table/",
	"title": "Tạo bảng trong AWS DynamoDB",
	"tags": [],
	"description": "",
	"content": " Mở bảng điều khiển DynamoDB  Ấn nút Create table  Nhập tên cho bảng: Books   Nhập parition key: id   Kéo xuống phần Table settings, chọn Customize settings   Sau đó, chọn On-demand   Kéo xuống cuối trang, ấn nút Create table Vậy là bạn đã tạo xong bảng Books  "
},
{
	"uri": "/vi/2-resize-image-function/2-1-create-lambda-function/",
	"title": "Tạo Lambda function chỉnh ảnh",
	"tags": [],
	"description": "",
	"content": " Mở bảng điều khiển AWS Lambda  Ấn nút Create function  Nhập tên function, ví dụ: resize-image   Chọn Node.js 16.x cho mục Runtime Nhấn nút Create function   Tải tệp source code về máy của bạn  \r\rSource code\r\r\rfunction.zip\r\r(8382 ko)\r\r\r\rẤn nút Upload from   Chọn .zip file   Nhấn nút Upload   Sau đó chọn tệp source code mà bạn đã tải về Nhấn Save   Tiếp theo, thêm biến môi trường để chỉnh chiều rộng và cao cho ảnh   Chọn tab Configuration Ấn Environment variables ở bên trái Ấn nút Edit   Ấn nút Add environment variable, sau đó thêm các biến môi trường sau:   WIDTH: nhập chiều rộng mới của ảnh, ví dụ 200px. HEIGHT: nhập cao mới của ảnh, ví dụ 280px. DES_BUCKET: tên của S3 bucket lưu ảnh sau khi thay đổi, book-image-resize-storage.  Sau đó ấn Save Vậy là chúng ta đã hoàn thành xong bước tạo một Lambda function và cấu hình biến môi trường cho nó. Tiếp theo sẽ tạo S3 bucket để lưu ảnh tải lên và ảnh sau khi qua chỉnh sửa.\n"
},
{
	"uri": "/vi/3-write-data-to-dynaomodb/3-2-write-data-by-lambda/",
	"title": "Ghi dữ liệu với Lambda function",
	"tags": [],
	"description": "",
	"content": " Mở bảng điều khiển AWS Lambda  Ấn nút Create function  Nhập tên cho function: book_create   Chọn Python 3.9 cho mục Runtime Ấn nút Create function   Sao chép đoạn code dưới đây vào tab lambda_function  import boto3 import json client = boto3.resource(\u0026#39;dynamodb\u0026#39;) def lambda_handler(event, context): book_item = event[\u0026#34;body\u0026#34;] error = None try: table = client.Table(\u0026#39;Books\u0026#39;) table.put_item(Item = book_item) except Exception as e: error = e if error is None: response = { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: \u0026#39;writing to dynamoDB successfully!\u0026#39;, \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, } else: response = { \u0026#39;statusCode\u0026#39;: 400, \u0026#39;body\u0026#39;: \u0026#39;writing to dynamoDB fail!\u0026#39;, \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, } return response  Ấn nút Deploy   Tiếp theo, thêm quyền truy cập cho Lambda vào DynamoDB   Ấn sang tab Configure Chọn mục Permissions phía bên trái Ấn vào role mà function đang thực hiện  Ấn nút Attach permissions Chọn mục Attach policies  Nhập dynamoDB để tìm policy thích hợp. Tích chọn policy: AmazonDynamoDBFullAccess Ấn nút Attach policies   Tạo sự kiện để kiểm tra hoạt động của function   Ấn sang tab Test Nhập tên cho sự kiện, ví dụ: test_1 Nhập đoạn dữ liệu sau vào Event JSON  { \u0026#34;body\u0026#34;: { \u0026#34;id\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Java\u0026#34;, \u0026#34;author\u0026#34;: \u0026#34;Alex\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;IT\u0026#34;, \u0026#34;price\u0026#34;: \u0026#34;10.89\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;This book guide to create Java web basic\u0026#34;, \u0026#34;image\u0026#34;: \u0026#34;https://book-image-resize-store.s3.ap-southeast-2.amazonaws.com/Java.jpg\u0026#34; } }  Ấn nút Save Ấn nút Test   Điều hướng đến bảng điều khiển DynamoDB   Chọn mục Update settings menu phía bên trái Tích chọn bảng Books Ấn nút Explore table items   Bạn sẽ nhận được tất cả các dữ liệu của bảng.   "
},
{
	"uri": "/vi/2-resize-image-function/2-2-create-s3-bucket/",
	"title": "Tạo S3 bucket",
	"tags": [],
	"description": "",
	"content": "Phần này, chúng ta sẽ tạo hai S3 bucket:\n Bucket book-image-store: để lưu ảnh lên Bucket book-image-resize-store: để lưu ảnh sau khi thay đổi kích thước   Mở bảng điều khiển Amazon S3  Ấn nút Create bucket  Nhập tên cho bucket, book-image-store   Chọn vùng gần bạn nhất.   Bỏ chọn chặn truy cập Block all public access   Tích vào ô I acknowledge that the current settings might result in this bucket and the objects within becoming public   Ấn nút Create bucket  Tương tự để tạo bucket book-image-resize-store, làm lại các bước từ 1 tới 5. Sau khi tạo xong hai bucket, chúng ta thêm trigger cho lambda function tạo ra trước đó   Ấn vào Add Trigger   Nhập S3 và chọn dịch vụ S3  Chọn bucket để triger lambda, book-image-store   Chọn All object create events cho mục Event type Tích chọn I acknowledge that using\u0026hellip;. như hình Ấn nút Add   Xem kết quả sau đi thêm trigger cho Lambda function   "
},
{
	"uri": "/vi/2-resize-image-function/",
	"title": "Thay đổi kích thước ảnh",
	"tags": [],
	"description": "",
	"content": "Trong phần này chúng ta sẽ tạo 1 Lambda Nodejs function để thay đổi kích thước ảnh sau khi tải ảnh lên S3 bucket, lưu ảnh sau khi sửa vào một S3 bucket mới và xoá ảnh cũ đi.\nNội dung  Tạo Lambda function Tạo S3 bucket Cấp quyền truy cập S3 bucket Kiểm tra hoạt động của Lambda  "
},
{
	"uri": "/vi/3-write-data-to-dynaomodb/",
	"title": "Ghi dữ liệu vào DynamoDB",
	"tags": [],
	"description": "",
	"content": "Trong phần này chúng ta sẽ tạo một bảng với DynamoDB, sau đó tạo Lambda function bằng Python để ghi dữ liệu vào bảng đó.\nNội dung  Tạo bảng trong AWS DynamoDB Ghi dữ liệu với Lambda function  "
},
{
	"uri": "/vi/2-resize-image-function/2-3-create-policy-access-s3/",
	"title": "Tạo Policy cho Lambda function",
	"tags": [],
	"description": "",
	"content": "Trong bước này chúng ta sẽ tạo Policy cấp quyền cho Lambda function có thể lấy, ghi và xoá object trong S3 bucket.\n Điều hướng tới bảng điều khiển của Lambda bạn đã tạo.   Trong tab Configuration, chọn mục Permissions Ấn vào role mà function đang thực hiện   Ấn nút Add permissions   Chọn Attach policies   Ấn nút Create policy  Ấn vào Choose a service  Nhập S3, sau đó chọn S3  Ấn vào mục Action, mở rộng Read trong Access level   Tích chọn quyền GetObject   Sau đó mở rộng mục Write   Tích chọn quyền DeleteObject   Tại mục Resource, ấn vào Add ARN để chỉ định tài nguyên.  Nhập tên bucket: book-image-store   Tích vào Any cho phép quyền với mọi object trong bucket Ấn Add   Ấn Add additional permissions  Lặp lại bước 4 và 5   Sau đó mở rộng mục Write, tích chọn quyền PutObject   Làm tương tự bước 8, 9.   Nhập tên bucket là book-image-resize-store   Ấn nút Next tags  Ấn nút Next review Nhập tên cho policy, ví dụ: LambdaResizeImageS3Policy   Xem lại các thông tin và ấn nút Create policy   Trở lại màn hình thêm policy cho Lambda function, nhập tên policy chúng ta vừa tạo.   Tích chọn policy: LambdaResizeImageS3Policy Ấn nút Attach policies Chúng ta đã hoàn thành cấp quyền đọc, ghi và xoá object trong S3 bucket cho Lambda function. Bước tiếp theo là kiểm tra hoạt động của Lambda fucntion khi tải lên một ảnh.  "
},
{
	"uri": "/vi/4-cleanup/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": " Xoá bảng trong DynamoDB   Mở bảng điều khiển của DynamoDB Chọn Tables ở menu phía bên trái Chọn bảng Books Ấn Delete Nhập delete và ấn Delete table  Xoá S3 bucket   Mở bảng điều khiển của S3 Chọn bucket book-image-resize-store Ấn nút Empty Nhập permanently delete và ấn Empty Chọn bucket book-image-resize-store Ấn nút Delete Nhập book-image-resize-store và ấn Delete Chọn bucket book-image-store Ấn nút Delete Nhập book-image-store và ấn Delete  Xoá Lambda function   Mở bảng điều khiển của AWS Lambda Chọn book_create function Ấn Actions Chọn Delete Nhập delete và ấn Delete Tương tự với resize_image function Nếu bạn tiếp tục với bài số 2 của series thì có thể bỏ qua bước xoá Lambda function.\n\r  "
},
{
	"uri": "/vi/2-resize-image-function/2-4-test-lambda-function/",
	"title": "Kiểm tra hoạt động",
	"tags": [],
	"description": "",
	"content": " Điều hướng đến S3 bucket: book-image-store   Ấn nút Upload   Ấn nút Add files  Chọn ảnh mà bạn muốn tải lên, sau đó ấn Upload  Đợi ảnh được tải lên thành công, sau đó ấn Close  Đợi một lúc để Lambda function chạy, sau đó kiểm tra lại xem bucket còn ảnh không  Điều hướng sang bucket - book-image-resize-store   Ấn vào tệp ảnh   Ấn vào Object URL để tải ảnh về  Nhưng bạn sẽ gặp lỗi Access Denied.  Để tải được ảnh, bạn cần thêm policy cho bucket để cho phép truy cập public.   Quay lại bucket, chọn mục Permission Ấn nút Edit tại mục Bucket policy  Sao chép đoạn json dưới đây mục Policy  { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;PublicReadGetObject\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::book-image-resize-store/*\u0026#34; } ] }  Ấn nút Save changes   Sau đó, bạn hãy thực hiện lại 6 và 7 để tải ảnh về máy để so sánh với ảnh mà bạn đã tải lên. Vậy là Lambda resize function đã hoạt động bình thường.  "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]